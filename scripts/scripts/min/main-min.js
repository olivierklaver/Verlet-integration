"use strict";function init(){window.canvasContainerSelector="#stage"}function setup(){window.frameRate=60;var e=700,t=600,n=window.devicePixelRatio||1,r=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;ratio=n/r;size(e*ratio,t*ratio);context.canvas.style.width=e+"px";context.canvas.style.height=t+"px";parameter("frameRate","FPS:",0,60);parameter("renderMode","Render mode:",0,2);createBlob()}function createBlob(){function o(e){e=Math.floor(e);return e<0?e+n:e>n-1?e-n:e}var e=width/ratio/2,t=height/ratio/2;Spring.stiffness=.005;var n=50,r=190,i=20;(function(t,n,r,i){for(var s=0;s<t;s++){var o=360/t*s;o=(o-90)*Math.PI/180;var u=Math.cos(o)*n+r,a=Math.sin(o)*n+i;pointList.push(new Point(u,a))}})(n,r,e,t);for(var s=0;s<n-1;s++)springList.push(new Spring(pointList[s],pointList[s+1]));springList.push(new Spring(pointList[s],pointList[0]));for(s=0;s<n;s++){springList.push(new Spring(pointList[s],pointList[o(s-i)]));springList.push(new Spring(pointList[s],pointList[o(s-i/1.5)]));springList.push(new Spring(pointList[s],pointList[o(s-i/4)]))}pointList.push(new Point(e,t));for(s=0;s<n;s++)springList.push(new Spring(pointList[s],pointList[n]))}function draw(){startX||(startX=pointList[pointList.length-1].x);startY||(startY=pointList[pointList.length-1].y);var e=Math.sin(c)*30,t=Math.cos(c)*35;c+=.15;pointList[pointList.length-1].x=startX+e;pointList[pointList.length-1].y=startY+t;for(var n=0;n<pointList.length;n++)pointList[n].refresh();for(n=RELAXATION;n>0;n--)for(var r=0;r<springList.length;r++)springList[r].contract();context.fillStyle=backgroundColor;context.fillRect(0,0,width,height);switch(renderMode){case 0:renderShape();debugDraw();break;case 1:debugDraw();break;default:renderShape()}}function renderShape(){context.lineWidth=20;context.strokeStyle="#ffffff";context.fillStyle=blobColor;context.beginPath();context.moveTo(pointList[0].x*ratio,pointList[0].y*ratio);var e,t;for(var n=1;n<pointList.length-1;n++){e=pointList[n].x*ratio;t=pointList[n].y*ratio;context.lineTo(e,t)}context.closePath();context.fill()}function debugDraw(){function t(e,t){context.beginPath();context.moveTo(e.x*ratio,e.y*ratio);context.lineTo(t.x*ratio,t.y*ratio);context.stroke();context.closePath()}context.lineWidth=.3;context.strokeStyle="rgba(0, 0, 0, .5)";for(var e=0;e<springList.length;e++)t(springList[e].pointa,springList[e].pointb)}var backgroundColor="#eee",blobColor="#78FFD0",renderMode=2,ratio,pointList=[],springList=[],RELAXATION=3,xSpeed=10,ySpeed=10,c=0,startX,startY;